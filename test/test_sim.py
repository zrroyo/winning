#!/usr/bin/python
import sys
sys.path.append("..")
import date
import data

def test_sim():

	time = date.Date('futures', 'm1305_day_k')
	curDay = time.curDate()

	dat = data.Data('futures', 'm1305_day_k')

	while curDay is not None:
		print curDay, dat.M(curDay, 'Close', 1), dat.M5(curDay, 'Close')
		if dat.M(curDay, 'Close', 1) < dat.M5(curDay, 'Close'):
			print curDay
		curDay = time.getSetNextDate()
			
		
	while curDay is not None:
		print curDay, dat.M(curDay, 'Close', 1), dat.M10(curDay, 'Close')
		if dat.M(curDay, 'Close', 1) < dat.M10(curDay, 'Close'):
			print curDay
		curDay = time.getSetNextDate()
		
		
	while curDay is not None:
		print curDay, dat.M(curDay, 'Close', 1), dat.M20(curDay, 'Close')
		if dat.M(curDay, 'Close', 1) < dat.M20(curDay, 'Close'):
			print curDay
		curDay = time.getSetNextDate()
		
	time.setCurDate('2012-12-03')
	print time.curDate(), time.prevDate(), time.nextDate()
	time.setCurDate('2012-12-03')
	print time.curDate(), time.getSetNextDate(), time.curDate()
	time.setCurDate('2012-12-03')
	print time.curDate(), time.getSetPrevDate(), time.curDate()

if __name__ == '__main__':
	test_sim()
"""
$ python test_sim.py
2012-05-31 3000.0 3000.0
2012-06-01 2968.0 2984.0
2012-06-01
2012-06-04 2953.0 2973.66666667
2012-06-04
2012-06-05 3021.0 2985.5
2012-06-06 3050.0 2998.4
2012-06-07 3071.0 3012.6
2012-06-08 3075.0 3034.0
2012-06-11 3145.0 3072.4
2012-06-12 3135.0 3095.2
2012-06-13 3109.0 3107.0
2012-06-14 3064.0 3105.6
2012-06-14
2012-06-15 3094.0 3109.4
2012-06-15
2012-06-18 3106.0 3101.6
2012-06-19 3188.0 3112.2
2012-06-20 3223.0 3135.0
2012-06-21 3204.0 3163.0
2012-06-25 3274.0 3199.0
2012-06-26 3284.0 3234.6
2012-06-27 3300.0 3257.0
2012-06-28 3261.0 3264.6
2012-06-28
2012-06-29 3292.0 3282.2
2012-07-02 3274.0 3282.2
2012-07-02
2012-07-03 3334.0 3292.2
2012-07-04 3396.0 3311.4
2012-07-05 3443.0 3347.8
2012-07-06 3409.0 3371.2
2012-07-09 3453.0 3407.0
2012-07-10 3425.0 3425.2
2012-07-10
2012-07-11 3390.0 3424.0
2012-07-11
2012-07-12 3320.0 3399.4
2012-07-12
2012-07-13 3398.0 3397.2
2012-07-16 3507.0 3408.0
2012-07-17 3389.0 3400.8
2012-07-17
2012-07-18 3412.0 3405.2
2012-07-19 3524.0 3446.0
2012-07-20 3480.0 3462.4
2012-07-23 3392.0 3439.4
2012-07-23
2012-07-24 3261.0 3413.8
2012-07-24
2012-07-25 3249.0 3381.2
2012-07-25
2012-07-26 3288.0 3334.0
2012-07-26
2012-07-27 3339.0 3305.8
2012-07-30 3428.0 3313.0
2012-07-31 3415.0 3343.8
2012-08-01 3395.0 3373.0
2012-08-02 3385.0 3392.4
2012-08-02
2012-08-03 3377.0 3400.0
2012-08-03
2012-08-06 3346.0 3383.6
2012-08-06
2012-08-07 3413.0 3383.2
2012-08-08 3367.0 3377.6
2012-08-08
2012-08-09 3379.0 3376.4
2012-08-10 3401.0 3381.2
2012-08-13 3386.0 3389.2
2012-08-13
2012-08-14 3373.0 3381.2
2012-08-14
2012-08-15 3412.0 3390.2
2012-08-16 3387.0 3391.8
2012-08-16
2012-08-17 3406.0 3392.8
2012-08-20 3444.0 3404.4
2012-08-21 3514.0 3432.6
2012-08-22 3579.0 3466.0
2012-08-23 3595.0 3507.6
2012-08-24 3628.0 3552.0
2012-08-27 3653.0 3593.8
2012-08-28 3620.0 3615.0
2012-08-29 3666.0 3632.4
2012-08-30 3688.0 3651.0
2012-08-31 3668.0 3659.0
2012-09-03 3791.0 3686.6
2012-09-04 3827.0 3728.0
2012-09-05 3806.0 3756.0
2012-09-06 3688.0 3756.0
2012-09-06
2012-09-07 3653.0 3753.0
2012-09-07
2012-09-10 3688.0 3732.4
2012-09-10
2012-09-11 3630.0 3693.0
2012-09-11
2012-09-12 3669.0 3665.6
2012-09-13 3664.0 3660.8
2012-09-14 3686.0 3667.4
2012-09-17 3550.0 3639.8
2012-09-17
2012-09-18 3492.0 3612.2
2012-09-18
2012-09-19 3529.0 3584.2
2012-09-19
2012-09-20 3516.0 3554.6
2012-09-20
2012-09-21 3484.0 3514.2
2012-09-21
2012-09-24 3451.0 3494.4
2012-09-24
2012-09-25 3473.0 3490.6
2012-09-25
2012-09-26 3439.0 3472.6
2012-09-26
2012-09-27 3436.0 3456.6
2012-09-27
2012-09-28 3436.0 3447.0
2012-09-28
2012-10-08 3374.0 3431.6
2012-10-08
2012-10-09 3428.0 3422.6
2012-10-10 3395.0 3413.8
2012-10-10
2012-10-11 3436.0 3413.8
2012-10-12 3396.0 3405.8
2012-10-12
2012-10-15 3334.0 3397.8
2012-10-15
2012-10-16 3362.0 3384.6
2012-10-16
2012-10-17 3362.0 3378.0
2012-10-17
2012-10-18 3381.0 3367.0
2012-10-19 3392.0 3366.2
2012-10-22 3418.0 3383.0
2012-10-23 3365.0 3383.6
2012-10-23
2012-10-24 3405.0 3392.2
2012-10-25 3377.0 3391.4
2012-10-25
2012-10-26 3376.0 3388.2
2012-10-26
2012-10-29 3317.0 3368.0
2012-10-29
2012-10-30 3314.0 3357.8
2012-10-30
2012-10-31 3375.0 3351.8
2012-11-01 3453.0 3367.0
2012-11-02 3425.0 3376.8
2012-11-05 3373.0 3388.0
2012-11-05
2012-11-06 3434.0 3412.0
2012-11-07 3378.0 3412.6
2012-11-07
2012-11-08 3381.0 3398.2
2012-11-08
2012-11-09 3344.0 3382.0
2012-11-09
2012-11-12 3224.0 3352.2
2012-11-12
2012-11-13 3179.0 3301.2
2012-11-13
2012-11-14 3214.0 3268.4
2012-11-14
2012-11-15 3141.0 3220.4
2012-11-15
2012-11-16 3133.0 3178.2
2012-11-16
2012-11-19 3174.0 3168.2
2012-11-20 3142.0 3160.8
2012-11-20
2012-11-21 3191.0 3156.2
2012-11-22 3188.0 3165.6
2012-11-23 3234.0 3185.8
2012-11-26 3212.0 3193.4
2012-11-27 3224.0 3209.8
2012-11-28 3257.0 3223.0
2012-11-29 3253.0 3236.0
2012-11-30 3231.0 3235.4
2012-11-30
2012-12-03 3285.0 3250.0
2012-12-04 3276.0 3260.4
2012-12-05 3303.0 3269.6
2012-12-06 3352.0 3289.4
2012-12-07 3398.0 3322.8
2012-12-10 3375.0 3340.8
2012-12-11 3413.0 3368.2
2012-12-12 3391.0 3385.8
2012-12-13 3393.0 3394.0
2012-12-13
2012-12-14 3456.0 3405.6
2012-12-17 3497.0 3430.0
2012-12-18 3467.0 3440.8
2012-12-19 3419.0 3446.4
2012-12-19
2012-12-20 3358.0 3439.4
2012-12-20
2012-12-21 3347.0 3417.6
2012-12-21
2012-12-24 3349.0 3388.0
2012-12-24
2012-12-25 3318.0 3358.2
2012-12-25
2012-12-26 3333.0 3341.0
2012-12-26
2012-12-27 3368.0 3343.0
2012-12-28 3336.0 3340.8
2012-12-28
2012-12-03 2012-11-30 2012-12-04
2012-12-03 2012-12-04 2012-12-04
2012-12-03 2012-11-30 2012-11-30
"""

